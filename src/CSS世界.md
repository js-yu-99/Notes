css全称Cascading Style Sheets，层叠样式表。所谓“层叠”，就是样式可以层层叠加。

css是流体布局，指的是利用元素“流”的特性实现的各类布局效果。因为“流”本身具有自适应特性，所以“流体布局”往往都是具有适应性的。但是流体布局并不等同于自适应布局。



# 第二章 需提前了解的术语和概念

## 2.1 务必了解的css世界的专业术语

1.**属性**：属性就是对css的中文称谓，比如 height、color

2.**值**：值大多与数字挂钩

3.**关键字**：css里特定的英文单词，比如transparent、solid、inherit

4.**变量**：存储css值

5.**单位**：css的单位分为时间单位（s、ms）和角度单位（deg、rad）还有长度单位。一般常见的是**长度单位**（如px、em等）

长度length = number + 长度单位

长度单位又分为相对长度单位和绝对长度单位

+ **相对长度单位**：又分为相对字体长度单位和是相对视区长度单位
  + 相对字体长度单位，如em、ex、rem、ch
  + 相对视区长度单位，如vh、vw、wmin、wmax

+ **绝对长度单位**：px、pt、cm、mm、pc等

6.**功能符**：值以函数的形式指定，主要用来表示颜色（rgba）、背景图片（url）、计算（calc）

7.**属性值**：属性冒号后面的所有内容统一称为属性值。

8.**声明**：属性名加上属性值就是声明。

9.**声明块**：{}

10.**规则或规则集**：选择器加声明块

11.**选择器**：代表目标元素。类选择器、ID选择器、属性选择器、伪类选择器、伪元素选择器

12.**关系选择器**：后代选择器、相邻后代选择器、兄弟选择器、相邻兄弟选择器



# 第三章 流、元素与基本尺寸

标签通常分为块级元素（block-level element）和内联元素（inline element）

## 3.1 块级元素

常见的块级元素有div、li、table。注意：**块级元素和“****display为block的元素****”不是一个概念**

比如table默认是table，li默认display的值是list-item。

块级元素的基本特征为一个水平流上只能单独显示一个元素，多个块级元素则换行显示。

元素有内外两个盒子组成，比如block是有外在的块级盒子和内在的块级容器盒子组成。width和height作用在内在盒子/容器盒子上。

## 3.2 width/height作用的具体细节

### 3.2.1 深藏不露的width：auto

width的默认值为auto，至少包含了4种不同的宽度表现：

1）充分利用可用空间。默认宽度时100%于父级容器的。

2）收缩和包裹。典型代表是浮动、绝对定位、inline-block或table，shrink-to-fit 译为“收缩到合适”，紧紧包裹着盒子，css3中的fit-content指的就是这种宽度表现。

3）收缩到最小：table-layout：auto的时候很常见。当每一列空间都不够的时候，文字能断就断，但中文是随便断的，英文单词不能断。

4）超出容器限制。除非有明确的width相关设置，否则上面3种情况尺寸都不会主动超过父级容器宽度。但在内容很长的连续的英文和数字或者内联元素被设置white-space：nowrap的时候，会超过父级容器宽度。



外部尺寸与流体特性：

1.正常流宽度： 如果一个元素是块级元素或者设置了display：block 就没有必要设置width：100%；

2.格式化宽度：绝对定位模型中的元素宽度是“包裹性”的，宽度由内部尺寸决定。但是当left/top或right/bottom对立方位的属性值同时存在时，元素的宽度表现为“格式化宽度”，其宽度大小相对于最近的具有定位特性（position属性值不是static）的祖先元素计算。

内部尺寸与流体特性：

1.包裹性

2.首选最小宽度：元素最适合的最小宽度。比如中文的最小宽度为每个汉字的宽度，英文的最小快递是有特定的连续的英文字符单元决定。类似图片这样的替换元素的最小宽度就是该元素内容本身的宽度。



### 3.2.2 width值作用的细节

声明width：100px 这类具体宽度时，width默认作用在content-box上，实际元素宽度会大于等于100ox，因为会有border和padding的影响。

### 3.2.3 Css流体布局下的宽度分离原则

1）为什么要宽度分离：便于维护。宽度分离的做法是使用两个元素，在父元素设置宽度和padding属性，内部的子元素因为width：auto，所以不会影响到父元素设置好的高度。

### 3.2.4 改变width/height作用细节的box-sizing

box-sizing 表示“盒尺寸”（盒尺寸的作用细节）。默认是content-box。可选border-box。

border-box情况下，width的设置是作用在border box上的，将padding、border都融合进width中。

**为什么box-sizing不支持margin-box？**

**1.margin的添加对width、offsetWidth等属性值没有影响。不会改变元素尺寸。**

**2.margin的背景永远是透明的。**

如何评价*{ box-sizing: border-box } 全局配置？

1）这种做法易产生没必要的消耗。对于普通内联元素（非图片等替换元素），box-sizing无论是什么值，对其渲染表现都没有影响；

2）不支持margin-box；

box-sizing发明的初衷：input、textarea

### 3.2.6 关于height：100%

百分比高度要想起作用，其父级必须有一个可以生效的高度值。

**1.为什么height：100%无效？**

width：100% 的时候发生了什么？

![img](https://cdn.nlark.com/yuque/0/2021/png/21510703/1624339936839-7f2f6b57-f5b6-4476-9465-68dce53cf4e7.png)

浏览器渲染是自上而下的渲染DOM内容。会先渲染父元素，后渲染子元素，是有先后顺序的。因此，当渲染到父元素的时候，子元素的width：100%并没有渲染，宽度就是两句诗内容的宽度；等渲染到文字这个子元素的时候，父元素宽度已经固定了，此时的width：100%就是已经固定好的父元素的宽度。宽度不够溢出就可以了。宽度这样，高度也可以这样。不会出现死循环的情况。

而为什么高度就不支持100%呢，规范指出如果包含块的高度没有显示指定（即高度由内容决定，并且该元素不是绝对定位，则计算值为auto。

宽度的解释是：如果包含块的宽度取决于该元素的宽度，那么产生的布局在css2.1中是未定义的。



2.如何让元素支持height：100%效果

1）设定显式的高度值。

2）使用绝对定位。

绝对定位的宽度百分比计算是相对于padding box的，也就是说会把padding大小值计算在内，但是，非绝对定位元素则是相对于content box 计算的。



## 3.3 CSS min-width/max-width和min-height/max-height二三事

### 3.3.1 为流体而生的min-width/max-width

在css世界中，min-width/max-width出现的场景一定是自适应布局或者流体布局中。

```css
img {
	max-width: 100%;
  height: auto!important;
}
```

以上css代码可以确保宽度被水平压缩的时候使图片保持原来的比例。

### 3.3.2 与众不同的初始值

1）min-width/height初始值为auto合法。

2）数值变化无动画（auto =》确定值不生效，没有动画效果）

### 3.3.3 超越!important，超越最大

1）超越!important。max-width的值优先级要比内联的带有!important的width值优先。

2）超越最大。当min-width 比 max-width设置的值大时，保留min-width的值，忽略max-width的值。

### 3.3.4 任意高度元素的展开收起动画技术

height的0px到auto是没有办法计算的，所有无法形成过渡或动画效果。所有采用max-height的方式。改变max-height的值可以有比较好的过渡动画效果。

但是max-height的缺点是如果值太大，在收起时可能会有“效果延迟”的问题。所以使用足够安全的最小值比较好。

## 3.4 内联元素

### 3.4.1 哪些元素是内联元素

1.从定义上看：内联元素的内联特指外在盒子。**只要外在盒子是内联盒子，那么元素就是内联元素**，比如inline-block、inline-table、inline的元素都是内联元素。

2.从表现看：从行为表现来看，**内联元素的典型特征就是可以和文字在一行显示**。因此，文字、图片、按钮、输入框、下拉框等都是内联元素。

### 3.4.2 内联世界深入的基础--内联盒模型

- **内容区域**（content area）：指元素本身，其大小仅受字符或图片本身特性控制。
- **内联盒子**（inline box）：指元素的外在盒子，用来决定元素是内联还是块级。又可以细分为内联盒子和匿名内联盒子。含有内联标签的是内联盒子，内联标签临近的纯文字部分，则属于匿名内联盒子。

- **行框盒子**（line box）：由一个个内联盒子组成的在块级标签内的盒子，每一行就是一个“行框盒子”。
- **包含盒子**（containing box）：由一行一行的“行框盒子”组成。

### 3.4.3 幽灵空白节点



html5文档声明中，内联元素的所有解析和渲染表现就如同每个行框盒子的前面有一个空白节点一样。这个节点永远透明，不占据任何宽度，看不见也无法获取。

![img](https://cdn.nlark.com/yuque/0/2021/png/21510703/1624430130077-a6160058-9759-470a-bae2-399ae1e94fb3.png)

```html
<style>
	div {
		background-color: red;
	}
  span {
  	display: inline-block;
  }
</style>
<body>
    <div>
        <span></span>
    </div>
</body>
```

例如此代码，此时div的高度并不是0，但是内部的span元素的高度明明就是0。

规范中实际上对这个“幽灵空白节点”是有提及的，“幽灵空白节点”实际上也是一个盒子，不过是个假想盒，名叫“strut”，中文直译为“支柱”，是一个存在于每个“行框盒子”前面，同时具有该元素的字体和行高属性的 0 宽度的内联盒。规范中的原文如下：

Each line box starts with a zero-width inline box with the element’s font and line height properties. We call that imaginary box a “strut”.



# 第四章 盒尺寸四大家族

## 4.1 深入理解content

### 4.1.1 content与替换元素

1.什么是替换元素

通过修改某个属性值呈现的内容就可以被替换的元素就被称为“替换元素”。例如<img><object><video><iframe>或者<textarea><input>都是典型的替换元素。

替换元素的特性：

1）内容的外观不受页面上的css的影响。替换元素的样式表现不在css作用域内，需要通过浏览器自身暴露的样式接口才能修改本身的外观。

2）有自己的尺寸。很多替换元素在没有明确尺寸设定的情况下，默认的尺寸是300像素x150像素。 img标签的默认尺寸与图片本身的大小相关

![img](https://cdn.nlark.com/yuque/0/2021/png/21510703/1624431661611-df426279-d3ab-490e-ac53-0507eb1d2c03.png)

3）在很多css属性上有自己的一套表现规则。比如vertical-align的默认值的baseline，基线的函数，被定义为字符x的下边缘。但是在替换元素中，因为